\hypertarget{ping_8c_09_09_source}{}\doxysection{ping.\+c++}
\label{ping_8c_09_09_source}\index{src/c++/network/ping.c++@{src/c++/network/ping.c++}}

\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00001}00001\ \textcolor{preprocessor}{\#include\ "{}ping.h"{}}}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00002}00002\ \textcolor{preprocessor}{\#include\ <stdexcept>}}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00003}00003\ \textcolor{preprocessor}{\#include\ <QtCore/QProcess>}}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00004}00004\ \textcolor{preprocessor}{\#include\ <QtCore/QTimer>}}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00005}00005\ \textcolor{preprocessor}{\#include\ <QtCore/QDebug>}}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00006}00006\ \textcolor{preprocessor}{\#include\ "{}netenums.h"{}}}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00007}00007\ }
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00008}00008\ \textcolor{keyword}{namespace\ }Networking}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00009}00009\ \{}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00010}00010\ }
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00011}00011\ Pinger::Pinger(QObject\ *parent)}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00012}00012\ \ \ \ \ :\ QObject\{parent\}}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00013}00013\ \ \ \ \ ,\ t(new\ QTimer(this))}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00014}00014\ \ \ \ \ ,\ ch(new\ QProcess(this))}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00015}00015\ \ \ \ \ ,\ addr(\textcolor{stringliteral}{"{}127.0.0.1"{}})}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00016}00016\ \ \ \ \ ,\ m\_args(\textcolor{stringliteral}{"{}"{}})}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00017}00017\ \{}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00018}00018\ \ \ \ \ ch-\/>setProcessChannelMode(QProcess::MergedChannels);}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00019}00019\ \ \ \ \ connect(ch,\ \&QProcess::readyRead,\ \textcolor{keyword}{this},\ \&Pinger::recv);}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00020}00020\ \ \ \ \ connect(t,\ \&QTimer::timeout,\ \textcolor{keyword}{this},\ \&Pinger::ping);}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00021}00021\ \}}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00022}00022\ }
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00023}00023\ Pinger::\string~Pinger()\ \{\ ch-\/>terminate();\ \}}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00024}00024\ }
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00025}00025\ \textcolor{keywordtype}{void}\ Pinger::start(uint32\_t\ interval,\ \textcolor{keyword}{const}\ QString\&\ address,\ \textcolor{keyword}{const}\ vector<QString>\ args)}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00026}00026\ \{}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00027}00027\ \ \ \ \ \textcolor{keywordflow}{if}(address.split(\textcolor{charliteral}{'.'}).size()\ !=\ 4)}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00028}00028\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ std::invalid\_argument(\textcolor{stringliteral}{"{}Invalid\ address\ is\ provided\ to\ ping"{}});}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00029}00029\ }
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00030}00030\ \ \ \ \ addr\ =\ address;}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00031}00031\ }
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00032}00032\ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ arg\ :\ args)}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00033}00033\ \ \ \ \ \ \ \ \ m\_args\ +=\ QString(arg);}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00034}00034\ }
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00035}00035\ \ \ \ \ \textcolor{keywordflow}{if}(interval\ ==\ 0)}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00036}00036\ \ \ \ \ \ \ \ \ ping();}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00037}00037\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00038}00038\ \ \ \ \ \ \ \ \ t-\/>start(interval);}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00039}00039\ \}}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00040}00040\ }
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00041}00041\ \textcolor{keywordtype}{void}\ Pinger::stop()\ noexcept\ \{\ t-\/>stop();\ \}}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00042}00042\ \textcolor{keywordtype}{void}\ Pinger::ping()}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00043}00043\ \{}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00044}00044\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ Q\_OS\_WIN}}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00045}00045\ \ \ \ \ ch-\/>start(\textcolor{stringliteral}{"{}ping"{}},\ QStringList(\textcolor{stringliteral}{"{}-\/t"{}})\ <<\ QString(addr)\ );}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00046}00046\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00047}00047\ \ \ \ \ ch-\/>start(\textcolor{stringliteral}{"{}ping"{}},\ QStringList()\ <<\ QString(addr)\ );}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00048}00048\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00049}00049\ \ \ \ \ qDebug().noquote()\ <<\ \textcolor{stringliteral}{"{}[PING]\ Starting\ ping\ at"{}}\ <<\ addr;}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00050}00050\ \}}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00051}00051\ }
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00052}00052\ \textcolor{keywordtype}{void}\ Pinger::recv()}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00053}00053\ \{}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00054}00054\ \ \ \ \ \textcolor{keyword}{auto}\ data\ =\ ch-\/>readAll();}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00055}00055\ \ \ \ \ \textcolor{keywordtype}{bool}\ success\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00056}00056\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ Q\_OS\_WIN}}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00057}00057\ \ \ \ \ success\ =\ data.contains(\textcolor{stringliteral}{"{}TTL="{}});}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00058}00058\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00059}00059\ \ \ \ \ success\ =\ data.contains(\textcolor{stringliteral}{"{}time="{}});}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00060}00060\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00061}00061\ }
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00062}00062\ \ \ \ \ emit\ result(success\ ?\ (\textcolor{keywordtype}{int})Enums::PingStatus::Success\ :\ (\textcolor{keywordtype}{int})Enums::PingStatus::Timeout);}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00063}00063\ \}}
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00064}00064\ }
\DoxyCodeLine{\Hypertarget{ping_8c_09_09_source_l00065}00065\ \}\ \textcolor{comment}{//\ Network}}

\end{DoxyCode}
