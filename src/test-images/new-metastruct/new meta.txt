Добавил еще 2 поля в метаданные:

    struct metadata_t{
        double lat = 0;
        double lon = 0;
        float dx = 0;
        float dy = 0;
        float x0 = 0;
        float y0 = 0;
        float ang = 0;
        float driftAngle = 0;
        uint32_t crc = 0;
    }__attribute__((packed));
    
    
Контрольная сумма (crc) подсчитывается следующим образом:

uint32_t crc32_bitwise(const void* data, size_t length, uint32_t previousCrc32 = 0){
    const uint32_t Polynomial = 0xEDB88320;
    uint32_t crc = ~previousCrc32;
    unsigned char* current = (unsigned char*) data;
    while (length--)
    {
    crc ^= *current++;
    for (unsigned int j = 0; j < 8; j++)
      crc = (crc >> 1) ^ (-int(crc & 1) & Polynomial);
    }
    return ~crc;
}
